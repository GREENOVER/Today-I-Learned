## TIL (Today I Learned)

### 3ì›” 18ì¼ (ëª©)

- #### [í•™ìŠµë‚´ìš©]
##### User Notifications?
Â -> ì²˜ìŒ í•´ë‹¹ ì£¼ì œë¥¼ ë³´ê³  ë…¸í‹°í”¼ì¼€ì´ì…˜ì´ë¼ëŠ” ë§ë§Œ ë“£ê³  Notification Centerì™€ ë™ì¼í•œê±´ì¤„ ì•Œì•˜ë‹¤.
Â ë¬´ì–¸ê°€ë¥¼ ê´€ì°°í•˜ê³  ì•¡ì…˜ì„ ì·¨í•´ì¤€ë‹¤ëŠ”ê²ƒì€ ë™ì¼í•˜ì§€ë§Œ ì‹¤ ì‚¬ìš©ì€ ë§ì´ ë‹¤ë¥¸ê²ƒ ê°™ì•˜ë‹¤..
Â ì˜ˆë¥¼ë“¤ì–´ ì‹¤ì‚¬ìš©ì—ì„œëŠ” í‘¸ì‹œ ì•ŒëŒ ê°™ì€ê²ƒì„ ìƒê°í•´ë³´ë©´ ëœë‹¤(ê²Œì„, ë¯¸ë¦¬ì•Œë¦¼ ë“± ë¬´ì–¸ê°€ ë°°ë„ˆì— í‘¸ì‹œê°€ ì˜¤ëŠ”ê²ƒë“¤ì´ ë‹¤ í•´ë‹¹ë©ë‹ˆë‹¤.)
Â : User Notificationsì˜ ì•ê¸€ìë¥¼ ë”°ì„œ UNìœ¼ë¡œ í•˜ê¸° ì„œë¸Œ í´ë˜ìŠ¤ ì´ë¦„ì´ ì‹œì‘
Â : í•´ë‹¹ Notificationì„ ë™ì‘ ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” Requestì™€ Triggerê°€ í•„ìš”
Â : Contentë¥¼ êµ¬ì„±í•˜ì—¬ Request í•˜ê²Œ ë¨

##### User Notificationsì˜ ì¢…ë¥˜
Â 1) Local Notification
Â : ì™¸ë¶€ ì„œë²„ë¥¼ í†µí•˜ì§€ ì•Šê³  ë‚´ë¶€ ì•±ì—ì„œ í‘¸ì‹œ ì•Œë¦¼ì„ ë³´ë‚´ëŠ” ê²½ìš°
Â -> ë¯¸ë¦¬ì•Œë¦¼, ì•ŒëŒ ì•±ì˜ í‘¸ì‹œ ì•Œë¦¼ ë“±.. (ë°°í„°ë¦¬ ë¶€ì¡± ê°™ì€ ì‹œìŠ¤í…œì´ ê°ì§€í•˜ëŠ”ê²ƒê³¼ëŠ” ë‹¤ë¦„)
Â 2) Remote Notification
Â : ì™¸ë¶€ ì„œë²„ì—ì„œ APNsì— í‘¸ì‹œ Notificationì„ ë³´ë‚´ì£¼ì–´ ë””ë°”ì´ìŠ¤ì— ë‚˜íƒ€ë‚´ëŠ” ê²½ìš°
Â (JSON í˜•íƒœì˜ ë”•ì…”ë„ˆë¦¬ë¡œ ë§Œë“¤ì–´ ë³´ë‚´ì¤Œ)
Â -> ë¡œì»¬ë³´ë‹¤ëŠ” ì§€ì—°ì´ ìˆê³  ì†ì‹¤ë  ìš°ë ¤ê°€ ìˆìŒ
Â -> ê²Œì„ì—ì„œì˜ ì´ë²¤íŠ¸ ì•Œë¦¼, ì¿ í° ë“±ë“± ì—¬ëŸ¬ ì•±ì˜ ì‹¤ì‚¬ìš©ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ì„œë²„ì˜ í‘¸ì‹œ ì•Œë¦¼\

##### Local Notificationì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•
```swift
import UIKit
import UserNotifications

class ViewController: UIViewController {
    let content = UNMutableNotificationContent()

    override func viewDidLoad() {
        super.viewDidLoad()
        
        UNUserNotificationCenter.current().requestAuthorization(options: [.alert,.sound,.badge], completionHandler: {didAllow,Error in print(didAllow) })
        
        configureNotification()
        deliverNotification()
    }
    
    func configureNotification() {
        content.title = "Notificaion í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸!!"
        content.subtitle = "Notification í‘¸ì‹œ ì•Œë¦¼ì´ë‹¤ìš”!"
        content.body = "Notification í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸ì¤‘ì…ë‹ˆë‹¤!!"
        content.badge = 1
    }
    
    func deliverNotification() {
        let trigger = UNTimeIntervalNotificationTrigger(timeInterval: 3, repeats: false)
        let request = UNNotificationRequest(identifier: "Second", content: content, trigger: trigger)
        let center = UNUserNotificationCenter.current()
        center.add(request, withCompletionHandler: nil)
    }
}
```
-. ë·° ë¡œë“œ ì‹œ í‘¸ì‹œ ì•Œë¦¼ì„ ê°€ë„ë¡ êµ¬í˜„í•´ë³¸ ì¼€ì´ìŠ¤
-. UserNotificationsë¥¼ import
-. ë·° ë¡œë“œ ì‹œ í‘¸ì‹œ ì•Œë¦¼ì„ í—ˆìš©í• ê²ƒì¸ì§€ ë¬»ëŠ” ì¸ì¦ì— ëŒ€í•œ ê¸°ëŠ¥ êµ¬í˜„ (ê¶Œí•œ ì–»ê¸°)
-. contentë¥¼ ì „ì—­ ìƒìˆ˜ë¡œ ë‘ì–´ ì •ë³´ë¥¼ ë‹´ìŒ
-. configureNotification(): contentì˜ ì—¬ëŸ¬ ì •ë³´ë“¤ì„ ì„¤ì •
-. deliverNotificaion(): ì–´ë–»ê²Œ í•´ë‹¹ ì•Œë¦¼ì„ ë™ì‘ì‹œí‚¬ì§€ì— ëŒ€í•œ Triggerì™€ ê·¸ Trigger ë° Identifier ì •ë³´ë¥¼ ë‹´ì€ Request ìƒì„±,
Â  Â UNUserNotificationì„¼í„°ì— í•´ë‹¹ ìš”ì²­ì„ ì¶”ê°€
-. í•´ë‹¹ ë‘ ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ì—¬ ViewDidLoad()ì—ì„œ í˜¸ì¶œ
-. content.badge: ì•± ì•„ì´ì½˜ì— ë¹¨ê°„ ë„¤ëª¨ë‚œì°½ìœ¼ë¡œ ì•Œë¦¼ í‘œì‹œë¥¼ ë‚˜íƒ€ë‚´ì£¼ëŠ”ê²ƒ (ëª‡ê°œì˜ ì•Œë¦¼ì´ë˜ badgeì˜ ìˆ˜ë¥¼ ì •í•´ì¤€ ìˆ˜ë¡œ ë‚˜íƒ€ë‚¨)

##### Notificationì— ì´ë¯¸ì§€ë¥¼ ë„£ì–´ì£¼ëŠ” ë°©ë²•
```swift
let imageName = "green"
guard let imageURL = Bundle.main.url(forResource: imageName, withExtension: ".png") else { return }
     
let attachment = try! UNNotificationAttachment(identifier: imageName, url: imageURL, options: .none)
content.attachments = [attachment]
```
1) ì›í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ í”„ë¡œì íŠ¸ íŒŒì¼ í´ë”ì— ì €ì¥
2) imageURLì„ êµ¬ì„±
3) UNNotificationAttachment ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ ì €ì¥
4) contentì— í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ì‚½ì…

<*Notofication ì´ë¯¸ì§€ ì‚½ì…>*

- #### [ëŠë‚€ì  ë° ê¹¨ë‹¬ì€ì ]
  1) Notificationì„ ìƒì„±í•˜ê³  í˜¸ì¶œí•˜ë©´ ê·¸ë§Œì´ ì•„ë‹ˆë¼ í•´ì œí•˜ëŠ” ì‹œì ê³¼ ë‹¤ì‹œ í˜¸ì¶œí•˜ëŠ” ì‹œì ë“± ì—¬ëŸ¬ ë¶€ë¶„ì—ì„œ ì‹ ê²½ì¨ì„œ ê´€ë¦¬ë¥¼ í•´ì¤˜ì•¼í•˜ëŠ”
  ì•„ì£¼ ê¹Œë‹¤ë¡œìš´ ì¹œêµ¬...ğŸ˜­
  Â -> Notificationì˜ Identifierë¥¼ ê°€ì§€ê³  í˜¸ì¶œ ë° í•´ì œë¥¼ ê´€ë¦¬í•´ì£¼ëŠ”ê²ƒë„ í•˜ë‚˜ì˜ ë°©ë²•!Â 
  2) Appì˜ NotificaitonDelegateë¥¼ ë‹¤ë¤„ì£¼ëŠ” ë¶€ë¶„ì€ AppDelegateì—ì„œ í•´ì£¼ëŠ”ê²ƒì´ ë” ì í•©í•˜ê²Œ ëŠê»´ì¡Œë‹¤.
  ì²˜ìŒ ViewControllerì—ì„œ í•´ë‹¹ Notificationì„ êµ¬ì„±í•˜ê³  ë¶ˆëŸ¬ì£¼ì—ˆìœ¼ë‹ˆê¹Œ ë§‰ì—°í•˜ê²Œ VCì—ì„œ Delegateë¥¼ Extensioní•˜ì—¬ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì£¼ì—ˆëŠ”ë° ë§Œì•½ Appì´ ë‹«í˜€ìˆê³  í‘¸ì‹œ ì•Œë¦¼ì„ í†µí•´ ë‹¤ì‹œ ì•±ì˜ ë·°ê°€ ë¡œë“œëœë‹¤ë©´ ë·°ê°€ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë˜ì§€ ì•Šê±°ë‚˜ ì§€ì—°ë ë•Œ í•´ë‹¹ ê¸°ëŠ¥ì˜ ì—­í• ì„
  ì œëŒ€ë¡œ ìˆ˜í–‰í•˜ì§€ ëª»í• ê²ƒì´ë‹¤.
  Â -> ì–´ë””ì„œ ê¼­ í•´ì¤˜ì•¼í•˜ëŠ” ì •í•´ì§„ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ì—­í• ì˜ ì°¨ì´ë¼ê³  ìƒê°ëœë‹¤. AppDelegateê°€ Appì˜ ì „ë°˜ì ì€ ë¶€ë¶„ì˜ ì—­í• ì„ í•¨ìœ¼ë¡œ
  Â ë” ì í•©í•˜ë‹¤ê³  ì •ë¦¬ë  ìˆ˜ ìˆë‹¤.
  Â 3) Remote Notificationë„ í•´ë³´ê³ ì‹¶ì—ˆëŠ”ë° í•´ë‹¹ ì„œë²„ì— ëŒ€í•œ ì„¤ì •ê³¼ ë˜í•œ ì• í”Œê°œë°œìë“±ë¡ì„ í•´ì•¼í•´ì„œ ê³¼ê¸ˆì´...! ë‹¤ìŒê¸°íšŒì—!ğŸ¤‘

- #### [ì°¸ê³ ìë£Œ]
  ì•¼ê³°ì˜ iOS-StartCamp ê°•ì˜ ë° í™œë™í•™ìŠµì¤‘
  https://developer.apple.com/documentation/usernotifications
