## TIL (Today I Learned)

### 11ì›” 29ì¼ (ì›”)   

- #### [í•™ìŠµë‚´ìš©]
  
  #### ActivityView in SwiftUI ?           

  SwiftUIë¥¼ í†µí•´ êµ¬í˜„ì„ í•˜ë‹¤ ì–´ë–»ê²Œ í•˜ë©´ ìš”ëŸ° ë°ì´í„°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆëŠ” ì•¡í‹°ë¹„í‹° ë·°ë¥¼ ë„ìš¸ ìˆ˜ ìˆì„ê¹Œì— ëŒ€í•´ ê³ ë¯¼í•˜ê³  ìŠ¤íƒ ì˜¤ë²„í”Œë¡œì™€ ë‹¤ì–‘í•œ ë ˆí¼ëŸ°ìŠ¤ë¥¼ í†µí•´ êµ¬í˜„í•´ë³´ì•˜ìŠµë‹ˆë‹¤!   
  ì•ìœ¼ë¡œ êµ¬í˜„í• ê²ƒì´ ì´ëŸ° halrí•œ ì•¡í‹°ë¹„í‹° ë·°ë¥¼ ë„ìš°ëŠ” ê²ƒì…ë‹ˆë‹¤.   

  ì ì •ë§ ê°„ë‹¨íˆ ì œ ë¸”ë¡œê·¸ URLì„ ê³µìœ í•  ìˆ˜ ìˆë„ë¡ ë²„íŠ¼ì„ í†µí•´ ê³µìœ í•  ìˆ˜ ìˆëŠ” ì•¡í‹°ë¹„í‹° ë·°ë¥¼ ë„ìš°ê³  ë™ì‘í•´ë´¤ìŠµë‹ˆë‹¤.   
  ê·¸ëŸ¼ ë°”ë¡œ ì½”ë“œë¥¼ ë³´ì‹œì£ !   

  #### ì†ŒìŠ¤ì½”ë“œ   
  ```swift
  import SwiftUI
  
  public struct ActivityView: UIViewControllerRepresentable {
    @Binding var isPresented: Bool
    public let activityItmes: [Any]
    public let applicationActivities: [UIActivity]? = nil
  
    public func makeUIViewController(context: Context) -> UIViewController {
      UIViewController()
    }
  
    public func updateUIViewController(_ uiViewController: UIViewController, context: Context) {
      let activityViewController = UIActivityViewController(
        activityItems: activityItmes,
        applicationActivities: applicationActivities
      )
  
      if isPresented && uiViewController.presentedViewController == nil {
        uiViewController.present(activityViewController, animated: true)
      }
      activityViewController.completionWithItemsHandler = { (_, _, _, _) in
        isPresented = false
      }
    }
  }
  
  struct ContentView: View {
    @State private var isActivityViewPresented = false
  
    var body: some View {
      Button("Share Link") {
        self.isActivityViewPresented = true
      }
      .background(
        ActivityView(
          isPresented: $isActivityViewPresented,
          activityItmes: [URL(string: "https://green1229.tistory.com")!]
        )
      )
    }
  }
  ```
  ìš°ì„  UIKitì„ SwiftUIì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ UIViewControllerRepresentable í”„ë¡œí† ì½œì„ ë”°ë¦…ë‹ˆë‹¤.   
  í”„ë¡œí† ì½œì„ ë”°ë¥¸ ActivityViewì— í•„ìš”í•œ í”„ë¡œí¼í‹°ë“¤ê³¼ ì²˜ìŒê³¼ ì—…ë°ì´íŠ¸ë˜ì—ˆì„ë•Œì˜ í•„ìˆ˜ ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì¤ë‹ˆë‹¤.   
  updateUIVC ë©”ì„œë“œì—ì„œ í•„ìš”í•œ ì¸ì(í…ìŠ¤íŠ¸, ì´ë¯¸ì§€, URL ë“± ê³µìœ ë˜ê±°ë‚˜ ì‚¬ìš©ë  ì˜µì…˜)ì„ ë°›ì•„ êµ¬ì„± í›„ ë„ì›Œì£¼ë„ë¡ í•©ë‹ˆë‹¤.   
  ì—¬ê¸°ì„œ ì»´í”Œë¦¬ì…˜ í•¸ë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•´ êµ¬ì„± í›„ ë‹¤ì‹œ isPresentedë¥¼ falseë¡œ ë°”ê¿”ì£¼ì—ˆìŠµë‹ˆë‹¤.   
  ê·¸ëŸ¬ë©´ í•œë²ˆ ë…¸ì¶œë˜ê³  ê³„ì† ë…¸ì¶œë˜ì§„ ì•ŠìŠµë‹ˆë‹¤.   
  ì´ê±¸ ì´ì œ ContentViewì—ì„œ background ë©”ì„œë“œë¡œ í˜¸ì¶œí•´ ì‚¬ìš©í•©ë‹ˆë‹¤.   
  í•´ë‹¹ ë·°ì—ì„œëŠ” Share Link ë²„íŠ¼ì´ ëˆŒë ¸ì„ë•Œ ëˆŒë¦° Bool ê°’ì„ ActivityViewì— ë„˜ê²¨ì£¼ê³  ë˜í•œ activityItemsì— ì œ ë¸”ë¡œê·¸ URLì„ ë„˜ê²¨ì£¼ë„ë¡ í•©ë‹ˆë‹¤.   
  ì •ë§ ê°„ë‹¨í•˜ì£ !?   

  ê·¸ëŸ¬ë©´ ì´ ì•¡í‹°ë¹„í‹° ë·°ì—ì„œëŠ” ì–´ë–¤ê²ƒë“¤ì„ Shareí•´ì¤„ ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ë„ë¡ í• ê»˜ìš”ğŸ™Œ   
  UIAcitivityViewControllerë¥¼ êµ¬ì„±í• ë•Œ activityItems ì¸ìë¥¼ ì„¤ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.   
  ê·¸ ì¸ìì— ë“¤ì–´ì˜¬ ìˆ˜ ìˆëŠ” 3ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.   
  1. Text   
  ê¸°ë³¸ì ìœ¼ë¡œ ë¬¸êµ¬ë¥¼ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ```swift
  let shareItems = ["Green's blog"]
  let activityController = UIActivityViewController(
    activityItems: shareItems,
    applicationActivities: nil
  )
  self.present(activityController, animated: true, completion: nil)
  ```
  2. Image   
  ```swift
  guard let image = UIImage(named: "Green.png") else { return }
  let shareItems = [image]
  let activityController = UIActivityViewController(
    activityItems: shareItems,
    applicationActivities: nil
  )
  self.present(activityController, animated: true, completion: nil)
  ```
  3. URL   
  ```swift
  guard let url = URL(string: "https://green1229.tistory.com/") else { return }
  let shareItems = [url]
  let activityController = UIActivityViewController(
    activityItems: shareItems,
    applicationActivities: nil
  )
  self.present(activityController, animated: true, completion: nil)
  ```
  activityItemsëŠ” Anyíƒ€ì…ì˜ Arrayì…ë‹ˆë‹¤.   
  ê·¸ë ‡ê¸°ì— ìœ„ì˜ í…ìŠ¤íŠ¸ / ì´ë¯¸ì§€ / URLë“¤ì´ ë‹¤ ê°™ì´ í˜¹ì€ í•˜ë‚˜ë§Œ ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ```swift
  let text = "green is green!"
  guard let url = URL(string: "https://green1229.tistory.com/"),
    let image = UIImage(named: "Green.png") else { return }
  let shareItems: [Any] = [text, url, image]
  let activityController = UIActivityViewController(
    activityItems: shareItems,
    applicationActivities: nil
  )
  self.present(activityController, animated: true, completion: nil)
  ```
  ì´ë ‡ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆê² ë„¤ìš”!   

  ë˜í•œ ì•„ë˜ì™€ ê°™ì€ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ê³µìœ ì—ì„œ ì œì™¸í•  í”Œë«í¼ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ```swift
  let shareItems = ["Write your share content"]
  let activityController = UIActivityViewController(
    activityItems: shareItems,
    applicationActivities: nil
  )
  activityController.excludedActivityTypes = [.postToFacebook, .postToTwitter]
  self.present(activityController, animated: true, completion: nil)
  ```
  ì´ë ‡ê²Œ ì‚¬ìš©í•´ì£¼ë©´ í˜ì´ìŠ¤ë¶ê³¼ íŠ¸ìœ„í„°ëŠ” ë‚˜íƒ€ë‚˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.   

  #### ë§ˆë¬´ë¦¬   
  ì ì´ë ‡ê²Œ í”í•œ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µë˜ëŠ” ê³µìœ  ì•¡í‹°ë¹„í‹° ë·°ì— ëŒ€í•´ SwiftUIìŠ¤ëŸ½ê²Œ ë„ìš°ê³  ì‚¬ìš©í•˜ëŠ”ê²ƒì„ í•™ìŠµí•´ë´¤ìŠµë‹ˆë‹¤â˜ºï¸   
  ìŠ¤ìœ ìŠ¤ëŸ¬ìš´ê²ƒì— ëŒ€í•´ í•­ìƒ ê³ ë¯¼í•´ë´ì•¼ê² ìŠµë‹ˆë‹¤.   

  #### [ì°¸ê³ ìë£Œ]   
  https://green1229.tistory.com/195   
  https://stackoverflow.com/questions/56533564/showing-uiactivityviewcontroller-in-swiftui  
  https://www.swiftdevcenter.com/uiactivityviewcontroller-tutorial-by-example/   
