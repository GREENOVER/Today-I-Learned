## TIL (Today I Learned)

### 11월 24일 (화)

- #### 학습내용
오늘은 Step2를 진행하며 스토리보드의 UI 요소 배치를 통한 화면 구성과 쥬스 주문 기능들을 구현하였다. 그중에서 특히 스토리보드 UI 요소들의 배치를 하며 디바이스 마다 뷰가 다름으로 요소들의 제약조건을 주어 오토레이아웃을 구현하려하였다. 해당 구현을 위해 오토레이아웃과 제약조건에 대해 학습을 하였다. 오토레이아웃을 찾아보니 프레임 레이아웃과의 차이부터 학습해보았다.
    - Frame Layout: UI를 뷰의 프레임을 프로그래밍 방식으로 계산하여 배치하는것으로 모든 뷰의 크기와 위치를 계산해야된다. 또한 변경이 되면 상호작용하는 뷰들의 프레임을 다시 계산한다. 이때문에 변경이 되어도 대처가 가능하여 안전하지만 모든 사항을 관리해야함으로 어렵고 시간이 많이 필요하다.
    - Auto Layout: 디바이스 마다 뷰가 다름으로 해당 뷰가 바뀌어도 UI 요소들의 위치, 사이즈들을 자동으로 맞춰주는 레이아웃 기능이다.
해당 조건들은 constraint (제약조건)으로 설정을 주면된다. 제약조건을 줄때 view가 있고 safe Area가 있다. 둘의 차이는 view는 해당 요소가 들어가있는 뷰를 범위로 잡아주고 safe Area는 유효범위로 화면에서 가려지지 않고 보여지는 범위이다. 그래서 view와 safe Area의 범위가 서로 상이함으로 조건을 줄때 신경써서 주어야한다.
오토레이아웃을 해주는 메뉴들은 스토리보드 우측 하단에 위치하고 있으며 아래와 같이 기능이 들어있다.
    - 핀 메뉴(Add New Constraints): 요소에 제약조건을 추가하는것으로 Top/Trailing/Bottom/Leading의 값을 줄 수 있고 조그만 화살표를 클릭해보면 어떤 요소 혹은 뷰와 상호작용을 할 것인지 선택 가능하다. 만약 같은 크기를 가져야 하는 요소들이 있다면 같이 선택 후 Equal Widths/Height로 설정해줄 수 있다.
    - 정렬 메뉴(Add New Alignment Constraints): 다른 뷰와 가로/세로 정렬 제약 조건을 설정해줄 수 있다.
    - 오토 레이아웃 이슈 툴: 제약조건을 삭제하거나 재설정 하는 등 관련된 사항들을 변경 및 이슈를 해결 해줄 수 있다.
또한, 제약조건을 설정해주고 변경 해줄 때는 삭제하여 다시 주거나 해당 제약조건을 Edit하여 수정해줘야한다. 중복이 되면 안된다.

  간단하게 스토리보드 제약조건을 통해 레이아웃을 구성하려고 학습을 해보았는데 화면에 바로 나타나서 테스트 하기는 편하였으나 생각과 너무 다르게 배치가 되고 잘 적용이 되지 않는다. 버튼들이 바로 따닥따닥 붙어 있을때는 버튼끼리 제약조건이 되지 않고 조금 멀리 있는 버튼으로 제약조건이 붙는 등의 경우가 있어 디바이스마다 크기가 다르게 설정되고 있다.. 스택뷰로 구성을 해야하는지 계속 찾아보고 적용해보고있는데 감이 잘 잡히지 않고 이게 되는건가 계속 시행착오만 겪고 있어 계속 바꿔가며 많은 시도는 해보고 있지만 결과물로 나오지 않고있다..

- #### 고민 포인트와 여러 시도
뷰 전환 시 인스턴스의 값이나 해당 데이터들을 그대로 넘겨주어 값을 다른 화면에서도 동일하게 나타내주고 싶어 하루종일 적용해보며 테스트를 해보았는데 다 실패하였다. 저번주에 노티피케이션을 배웠던터라 해당 방법으로 쥬스주문화면에서 노티피케이션센터를 포스트하고 재고관리화면에서 viewDidLoad 부분에 옵저버를 두어 적용해보려하는데 파라미터의 object 부분을 전달하려는 객체를 주어야 하는것 같아 찾아보며 적용해보고 있는데 잘 되지 않았다. 그래서 또 찾은 방법인 delegate 프로토콜을 만들어 값을 전달해주었지만 원하는 결과로 도출되진 않았다. 현재는 prepare함수를 오버라이드하여 화면 전환 시 값을 전달해주긴 하였는데 얼럿창에서 재고수정관리로 넘어가는 선택지를 누르면 적용이 되지 않아 원인을 못찾고 있다.. 계속해서 자료를 찾아보며 맞는 방법인지 우선 읽어본다음 적용해보고 테스트해보는데 다 실패하였다. 적용해볼수록 미궁? 속으로 빠지는 느낌이 들었다. 간단한 부분인데 코드를 전부 바꿔야 가능한것인지 데이터만 전달해주는 되게 간단한 느낌인데 새 뷰로 전환될때 기존 인스턴스 과일재고 값만 넘겨줄 수 있으면 되는건데 많은 시행착오가 있어 생각이 잘 정리되지 않고있다. 다시 휴식을 취하고 천천히 시행착오를 겪어나갈 예정이다..!

- #### 참고자료
http://labs.brandi.co.kr/2018/05/30/kimjh.html
https://zeddios.tistory.com/380
https://ppomelo.tistory.com/161
https://jiseobkim.github.io/swift/2018/10/27/swift-NotificationCenter.html