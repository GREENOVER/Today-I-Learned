## TIL (Today I Learned)

### 2ì›” 22ì¼ (í™”)   

- #### [í•™ìŠµë‚´ìš©] 
  ### Combine - Publisher      
  
  ì´ì „ì— RxSwiftì— ëŒ€í•´ì„œëŠ” ì—¬ëŸ¬ ëª©ì°¨ë¡œ ìˆœì°¨ì ìœ¼ë¡œ ì§„í–‰í•œì ì´ ìˆìŠµë‹ˆë‹¤! ê·¸ê²ƒê³¼ ìœ ì‚¬í•˜ê²Œ combineë„ í•œë²ˆ ì‰¬ìš´ê²ƒë¶€í„° ì°¨ê·¼ì°¨ê·¼ ì •ë¦¬í•´ë³´ë©´ ì–´ë–¨ê¹Œí•´ì„œ ì‹œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤ğŸ™Œ   
  ì‚¬ì‹¤ í˜„ì—…ì—ì„œ ê³„ì† swiftUIì™€ ë”ë¶ˆì–´ ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ ìœ„í•´ combineì„ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°,   
  ë§‰ìƒ combineì— ëŒ€í•´ì„œ í¬ìŠ¤íŒ…í•œê±´ RxSwiftì™€ ë¹„êµí•˜ê³  ëŒ€ëµì ìœ¼ë¡œ ì´ëŸ¬í•œê±°ë‹¤~ë¼ê³  ê°œë…ë§Œ ì†Œê°œí–ˆë˜ê²ƒ ê°™ë”ë¼êµ¬ìš”ğŸ¥²   
  (ê¶ê¸ˆí•˜ì‹ ë¶„ì€ ì•„ë˜ í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•´ì£¼ì„¸ìš”!)   
  https://green1229.tistory.com/137   

  ì˜¤ëŠ˜ì˜ ì£¼ì œëŠ” Publisherì…ë‹ˆë‹¤.   
  ì‚¬ì‹¤ í¬ê²Œ combineì„ ë‹¤ë£¬ë‹¤ë©´ publisher, subscriber, subject, scheduler, cancellableë¡œ êµ¬ì„±ë˜ëŠ”ë° ì—¬ê¸°ì„œ ê°€ì¥ ì²« ì‹œì‘ì ì„ publisherë¡œ ê°€ê² ìŠµë‹ˆë‹¤ğŸ˜€   
  ì´ë²ˆ Publihserì™€ Subscribeë¥¼ ì •ë¦¬í•¨ì— ìˆì–´ naljinë‹˜ì˜ ë¸”ë¡œê·¸ê°€ êµ‰ì¥íˆ ìœ ìš©í•œ ë ˆí¼ëŸ°ìŠ¤ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤!   
  https://sujinnaljin.medium.com/combine-subscribe-1f09ce19477d   
  
  #### Publisher?    
  í•´ë‹¹ ì˜ë¯¸ë§Œ ë†“ê³  ë³´ë©´ ë¬´ì–¸ê°€ë¥¼ ì§ì—­í•˜ëŠ” ë°œí–‰ìë¼ëŠ” ì˜ë¯¸ë¡œ ì“°ì…ë‹ˆë‹¤.   
  ì‚¬ì‹¤ ê·¸ëŸ° ì˜ë¯¸ë¡œ ì‚¬ìš©ë˜ëŠ”ê²ƒë„ ë§êµ¬ìš”.   
  ì‹œê°„ íë¦„ì— ë”°ë¼ ê°’ ì‹œí€€ìŠ¤ì˜ ë³€í™” íë¦„ì„ Subscriberì—ê²Œ ë°œí–‰ ì¦‰ ì „ì†¡í•´ì£¼ëŠ” ì—­í• ì„ í•´ì¤ë‹ˆë‹¤.   
  ì¦‰ í•˜ë‚˜ í˜¹ì€ ì—¬ëŸ¬ê°œì˜ Subscriberì—ê²Œ ê°’ ìš”ì†Œë¥¼ ì œê³µí•©ë‹ˆë‹¤.  
  ì €ëŠ” êµ‰ì¥íˆ notificationì˜ ìš©ì–´ì™€ ê°œë…ê³¼ ë¹„ìŠ·í•˜ë‹¤ê³  ìƒê°í–ˆì–´ìš”ğŸ¤”   
  Publisherê°€ ë°œí–‰í•˜ëŠ” Outputê³¼ Failure íƒ€ì…ì€ Subscriberì˜ Inputê³¼ Failure íƒ€ì…ê³¼ ë™ì¼í•´ì•¼ í•©ë‹ˆë‹¤.   
  ê°™ì€ íƒ€ì…ì„ ë³´ë‚´ê³  ê°™ì€ íƒ€ì…ì„ ë°›ì•„ì•¼í•˜ëŠ” ë‹¹ì—°í•œ ì´ì¹˜ì¼ê²ƒ ê°™ì•„ìš”!   
  
  #### Publisherê°€ Subscriberì—ê²Œ êµ¬ë…ì„ ê°€ì§€ê³  ì†Œí†µí•˜ëŠ” ê¸°ë³¸ 3ëŒ€ì¥ ë©”ì„œë“œ   
  1. receive(subscription:)   
  ì´ ë©”ì„œë“œëŠ” subscriberê°€ publisherë¥¼ êµ¬ë… ì¦‰ subscribe(_:)í•˜ê²Œ ë˜ë©´ Publisherì¸¡ì—ì„œ í˜¸ì¶œí•˜ê²Œë©ë‹ˆë‹¤.   
  íë¦„ìƒ ë³´ë©´ subscribeí•˜ì—¬ êµ¬ë…ì„ ìš”ì²­í•˜ê²Œ ë©ë‹ˆë‹¤.   
  ê·¸ëŸ¬ë©´ receive(subscriber:)ê°€ í˜¸ì¶œë˜ê³  receive(subscription:)ë¥¼ í†µí•´ subscriptionì´ë¼ëŠ” êµ¬ë…ê¶Œì„
  ë°œí–‰í•˜ê²Œë©ë‹ˆë‹¤.   
  ë˜í•œ subscriptionì„ ì„¤ì •í•˜ë©° ë°©ì¶œë˜ëŠ” ê°’ì€ ì–¼ë§ˆë§Œí¼ ìµœëŒ€ë¡œ ë°›ì„ì§€ ê°™ì€ ì¡°ê±´ë“¤ë„ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤.   
  ì‰½ê²Œ ìƒê°í•´ë³´ë©´ êµ¬ë…ê¶Œì—ë„ ë² ì´ì§, í”„ë¦¬ë¯¸ì—„ ìˆë“¯ì´ ê·¸ëŸ° ê³¼ì •ì´ë¼ê³  ë³´ë©´ ë©ë‹ˆë‹¤.   
  êµ¬ë…ì„ ìš”ì²­í–ˆìœ¼ë‹ˆ êµ¬ë…ê¶Œì„ Subscriberì—ê²Œ ì¤˜ì•¼ê² ì£ ?   
  ì´ subscriptionì„ subscriberì—ê²Œ ë³´ë‚´ì¤ë‹ˆë‹¤.  
  ì¦‰ ì •ë¦¬í•˜ìë©´, êµ¬ë…ìê°€ êµ¬ë…ì„ ìš”ì²­í–ˆê³  ê·¸ê±¸ ì²˜ë¦¬í•´ì„œ êµ¬ë…ê¶Œì„ ë§Œë“¤ì–´ êµ¬ë…í•  ìˆ˜ ìˆê²Œ êµ¬ë…ìì—ê²Œ   
  êµ¬ë…ê¶Œì„ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì´ë¼ê³  ë³´ë©´ ë ê²ƒ ê°™ì•„ìš”!   
  (êµ¬ë… êµ¬ë… ê±°ë ¤ì„œ ì¡°ê¸ˆ í—·ê°ˆë¦¬ë„¤ìš”ğŸ¥²ğŸ™ğŸ»)   

  2. receive(_:)   
  ìœ„ì—ì„œ ë§í–ˆë“¯ ì–¼ë§ˆë§Œí¼ì˜ ê°’ì„ ë°›ì„ì§€ì— ëŒ€í•´ì„œëŠ” subscriberì—ì„œ request(_:)ë¥¼ í†µí•´ ìš”ì²­í•©ë‹ˆë‹¤.   
  ê·¸ëŸ¬ë©´ ê·¸ì— ë”°ë¼ publisherì—ì„œ receive(_:)ë¥¼ í˜¸ì¶œí•´ subscriberì—ê²Œ ìš”ì²­í•œ ê°¯ìˆ˜ì˜ ê°’ì„ ì „ë‹¬í•´ì¤ë‹ˆë‹¤.   
  ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ”ê±°ë¼ê³  ë³´ë©´ ë©ë‹ˆë‹¤!   

  3. receive(completion:)   
  publisherì—ì„œ ì œê³µí•˜ëŠ” ê°’ì´ ëë‚¨ í˜¹ì€ ì—ëŸ¬ê°€ ë‚œë‹¤ë©´ ì´ë¥¼ subscriberì—ê²Œ ì•Œë ¤ì¤˜ì•¼í•©ë‹ˆë‹¤.   
  ê·¸ë•Œ ì´ receive(completion:) ë©”ì„œë“œë¥¼ ì´ìš©í•©ë‹ˆë‹¤.   
  êµ¬ë…ìê°€ êµ¬ë…ì´ ëë‚˜ê±°ë‚˜ ì–´ë–¤ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œê°€ ë˜ì—ˆì„ë•Œ ì•Œë ¤ì¤˜ì•¼í•˜ëŠ” ì˜ë¬´ê°€ ìˆë“¯ì´ ë™ì¼í•œ ë§¥ë½ì…ë‹ˆë‹¤.   

  #### Publisher & Subscriber êµ¬í˜„í•˜ê¸°   
  ```swift
  let customPublisher = (1...10).publisher
  
  class CustomSubscriber: Subscriber {
    func receive(subscription: Subscription) {
      subscription.request(.max(5))
    }
  
    func receive(_ input: Int) -> Subscribers.Demand {
      print("value is \(input)")
      return .none
    }
  
    func receive(completion: Subscribers.Completion<Never>) {
      print("Finished")
    }
  }
  
  let customSubscriber = CustomSubscriber()
  customPublisher.subscribe(customSubscriber)
  ```
  ìš°ì„  1~10ê¹Œì§€ Intê°’ì„ ë°©ì¶œí•˜ëŠ” Publisherë¥¼ ë§Œë“­ë‹ˆë‹¤.   
  ê·¸ë‹¤ìŒ ì»¤ìŠ¤í…€í•œ Subscriber íƒ€ì…ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.   
  ê·¸ ì•ˆì—ì„œ í•„ìˆ˜ 3ê°€ì§€ ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì¤ë‹ˆë‹¤.   
  1. receive(subscription:)   
  ì´ ë©”ì„œë“œë¡œ request ë©”ì„œë“œë¥¼ ì´ìš©í•´ ìµœëŒ€ ëª‡ê°œì˜ ê°’ì„ ë°›ì„ì§€ ì •í•´ì¤ë‹ˆë‹¤.   
  2. receive(_:)   
  ì´ ë©”ì„œë“œì—ì„œ ë°›ì€ ê°’ì„ ê°€ì§€ê³  ì·¨í•  ì•¡ì…˜ì„ êµ¬í˜„í•©ë‹ˆë‹¤.   
  3. receive(completion:)   
  ì´ ë©”ì„œë“œì—ì„œ êµ¬ë…ìœ¼ë¡œ ì¸í•œ ê°’ ìˆ˜ì‹ ì´ ë‹¤ ì™„ë£Œë¨ì„ ìˆ˜ì‹  í™•ì¸í–ˆì„ë•Œì˜ ì•¡ì…˜ì„ êµ¬í˜„í•´ì¤ë‹ˆë‹¤.   

  ì..! ëŒë ¤ë³´ë©´!   
  ```
  value is 1
  value is 2
  value is 3
  value is 4
  value is 5
  Finished
  ```
  ì´ë ‡ê²Œ ë‹¹ì—°í•˜ê²Œ ë‚˜íƒ€ë‚¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ì•„ì£¼ ê°„ë‹¨í•˜ë‹ˆ ì§ì ‘ í•´ë³´ì‹¬ì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤ğŸ™Œ   
  
  #### ë§ˆë¬´ë¦¬   
  ê°„ë‹¨í•œê±° ê°™ì•˜ëŠ”ë° ìƒê°ë³´ë‹¤ íë¦„ì´ ì¡°ê¸ˆ ëŸ¬ë‹ì»¤ë¸ŒëŠ” ìˆë‹¤ê³  ìƒê°ì€ í•©ë‹ˆë‹¤ğŸ™‹ğŸ»   
  ê·¸ë˜ë„ íë¦„ ê¸°ì´ˆë¶€í„° ì˜ ì´í•´í•˜ë©´ ì´í›„ëŠ” ì‰½ê²Œ ì ìš©ë§Œ í•˜ë©´ë˜ì„œ ë¬¸ì œ ì—†ì„ê±°ì—ìš”!   
  ë‹¤ê°™ì´ í™”ì´íŒ…ì…ë‹ˆë‹¤ã…ã…   
  
  #### [ì°¸ê³ ìë£Œ]   
  https://green1229.tistory.com/221   
  https://developer.apple.com/documentation/combine/publisher   
  https://sujinnaljin.medium.com/combine-subscribe-1f09ce19477d   