## TIL (Today I Learned)

### 6ì›” 23ì¼ (ëª©)   

- #### [í•™ìŠµë‚´ìš©]    
  ## SwiftUI 4.0 - NavigationPath  
  #### NavigationPath????            

  WWDC 2022ì—ì„œ Navigation ë¶€ë¬¸ì—ì„œ ê°™ì´ ì†Œê°œë˜ì—ˆìœ¼ë©° iOS 16 ë¶€í„° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ê³µì‹ë¬¸ì„œì—ì„œëŠ” NavigationPathì„ "ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒì˜ ë‚´ìš©ì„ ë‚˜íƒ€ë‚´ëŠ” ë°ì´í„°ì˜ íƒ€ì…ì´ ì§€ì›Œì§„ ëª©ë¡" ì´ë¼ê³  í•©ë‹ˆë‹¤.   
  ì‰½ê²Œ ìƒê°í•´ë³´ë©´ ê·¸ëƒ¥ ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒì— ê° ì»¨í…ì¸ ë“¤ì´ ë“¤ì–´ê°ˆí…ë° ì´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ë¦¬ìŠ¤íŠ¸ë¼ê³  ë³´ë©´ ë ê²ƒ ê°™ìŠµë‹ˆë‹¤.   

  #### NavigationPath ì„ ì–¸   
  ```swift
  struct NavigationPath
  ```
  ë....   
  ì‹¬í”Œ ë‹¨ì´ ê·¸ìì²´ âœ¨   

  #### NavigationPath Overview   

  ë°ì´í„° ì»¬ë ‰ì…˜ì— ëŒ€í•œ ë°”ì¸ë”©ì„ í†µí•´ ìŠ¤íƒì„ ì´ˆê¸°í™”í•´ NavigationStackì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.   
  ìŠ¤íƒì€ ìŠ¤íƒì˜ ê° ë·°ì— ëŒ€í•œ ì»¬ë ‰ì…˜ì˜ ë°ì´í„° í•­ëª©ì„ ì €ì¥í•©ë‹ˆë‹¤.    
  ì¦‰ ê° ë·°ë“¤ì´ ìŠ¤íƒì˜ ë°ì´í„°ë¡œ ì €ì¥ë˜ëŠ” ê²ƒì´ì£ !   
  ë˜í•œ ì´ë¯¸ ì´ì „ í¬ìŠ¤íŒ…ì—ì„œë„ ê²ªì—ˆë‹¤ì‹œí”¼ ì»¬ë ‰ì…˜ì„ ì½ê³  ì“¸ ìˆ˜ ìˆê¸°ì— ìŠ¤íƒì˜ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ë„ ìˆê³  ë³€ê²½í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.    
  ìŠ¤íƒì´ í•œ ì¢…ë¥˜ì˜ ë°ì´í„°ì—ë§Œ ì˜ì¡´í•˜ëŠ” ë·°ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê²½ìš° ë°°ì—´ê³¼ ê°™ì€ í‘œì¤€ ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ë°˜ë©´ ë‹¨ì¼ ìŠ¤íƒì— ë‹¤ë¥¸ íƒ€ì…ì˜ ë°ì´í„°ë¥¼ ë‚˜íƒ€ë‚´ì•¼í•˜ëŠ” ê²½ìš° navigation pathë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.    
  pathëŠ” íƒ€ì… ì´ë ˆì´ì € (íƒ€ì… ì§€ìš°ê¸°?)ë¥¼ ì‚¬ìš©í•˜ê¸°ì— ì—¬ëŸ¬ ì¢…ë¥˜ì˜ ìš”ì†Œë“¤ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.    
  pathëŠ” ë°ì´í„° ìš”ì†Œë¥¼ ì¶”ê°€ ë° ê³„ì‚°, ì œê±° ë“±ì„ ìœ„í•œ ì¼ë°˜ì ì¸ ì»¬ë ‰ì…˜ ì œì–´ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.    
  ì¦‰,  pathë¥¼ ë³€ê²½í•´ ë·°ë¥¼ ë¹ ì ¸ë‚˜ê°ˆ ìˆ˜ë„ ìµœìƒë‹¨ìœ¼ë¡œ ë·°ë¥¼ ì´ë™ì‹œí‚¬ìˆ˜ë„ ìˆë‹¤ëŠ” ë§ì…ë‹ˆë‹¤.    

  #### Serialize the path    

  ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒì— í‘œì‹œë˜ëŠ” ê°’ì´ Codable í”„ë¡œí† ì½œê³¼ ì¤€ìˆ˜í•˜ë©´ pathì˜ Codable í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•´ pathì˜ ì§ë ¬í™” í‘œí˜„ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ì´ë¥¼ í†µí•´ ìŠ¤íƒì˜ ë‚´ìš©ì„ ì €ì¥í•˜ê³  ë³µì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ì˜ˆë¥¼ë“¤ì–´ pathì˜ ì§ë ¬í™” ë° ì—­ì§ë ¬í™”ë¥¼ ì²˜ë¦¬í•˜ëŠ”ê²ƒì„ ObservableObjectë¡œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ê·¸ëŸ¼ ì•„ë˜ ê³µì‹ë¬¸ì„œì˜ ì˜ˆì‹œ ì½”ë“œë¡œ ë³´ì‹œì£ !   
  ```swift
  class MyModelObject: ObservableObject {
    @Published var path: NavigationPath
  
    static func readSerializedData() -> Data? {
        // Read data representing the path from app's persistent storage.
    }
  
    static func writeSerializedData(_ data: Data) {
        // Write data representing the path to app's persistent storage.
    }
  
    init() {
        if let data = Self.readSerializedData() {
            do {
                let representation = try JSONDecoder().decode(
                    NavigationPath.CodableRepresentation.self,
                    from: data)
                self.path = NavigationPath(representation)
            } catch {
                self.path = NavigationPath()
            }
        } else {
            self.path = NavigationPath()
        }
    }
  
    func save() {
        guard let representation = path.codable else { return }
        do {
            let encoder = JSONEncoder()
            let data = try encoder.encode(representation)
            Self.writeSerializedData(data)
        } catch {
            // Handle error.
        }
    }
  }
  ```
  ì´ë ‡ê²Œ ì •ì˜ëœ MyModelObject ê°ì²´ë¥¼ í†µí•´ Sceneì— ë“¤ì–´ê°ˆë•Œ ë„¤ë¹„ê²Œì´ì…˜ pathì˜ ìƒíƒœë¥¼ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ìš°ì„  ì•„ë˜ ê³µì‹ ë¬¸ì„œì˜ ì½”ë“œ ì˜ˆì‹œëŠ” Sceneì´ ë°±ê·¸ë¼ìš´ë“œì— ì§„ì…í• ë•Œ pathì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.   
  ```swift
  @StateObject private var pathState = MyModelObject()
  @Environment(\.scenePhase) private var scenePhase
  
  var body: some View {
    NavigationStack(path: $pathState.path) {
        // Add a root view here.
    }
    .onChange(of: scenePhase) { phase in
        if phase == .background {
            pathState.save()
        }
    }
  }
  ```
  ì´ë ‡ê²Œ onChangeì—ì„œ Environment ë³€ìˆ˜ì¸ scenePhaseë¥¼ ë°›ê³  í•´ë‹¹ phaseê°€ ë°±ê·¸ë¼ìš´ë“œì¼ë•Œ ìœ„ì—ì„œ ë§Œë“¤ì–´ì¤€ MyModelObject ì¸ìŠ¤í„´ìŠ¤ì¸ pathStateë¥¼ ì €ì¥í•©ë‹ˆë‹¤.   
  ì´ ê¸°ëŠ¥ì„ í†µí•´ ì•„ì£¼ ìœ ìš©í•˜ê²Œ ê²½ë¡œë¥¼ ì €ì¥í•˜ê³  ë¶ˆëŸ¬ì˜¤ê³  ë‹¤ì¬ë‹¤ëŠ¥ í• ê²ƒ ê°™ì•„ìš”!   

  #### ë§ˆë¬´ë¦¬    

  ë¹¨ë¦¬ SwiftUI 4.0ì„ ë„ì…í•´ë³´ê³  ì‹¶ì–´ìš”ğŸ˜­   
  ì´ë ‡ê²Œ ë¯¸ë‹ˆë©ˆ íƒ€ê²Ÿ ê³ ë ¤í•˜ê³  ê³ ë ¤í•˜ë‹¤ í•œ 2~3ë…„ ë’¤ì— ì¨ë³¼ê±° ê°™ì€ ëŠë‚Œì´ ê°•í•˜ê²Œ ë“¤ì–´ì„œ...   
  ê·¸ë•Œë˜ë©´ ê°ì„ ìƒì„ê²ƒ ê°™ì€ë°!ã…‹ã…‹ã…‹   
  ê·¸ë˜ë„ ê·¸ë•Œë˜ë©´ ë” SwiftUIê°€ ë°œì „í•´ìˆê² ì£ ?ğŸ™ğŸ»   

  #### [ì°¸ê³ ìë£Œ]   
  https://green1229.tistory.com/257   
  https://developer.apple.com/documentation/swiftui/navigationpath   
