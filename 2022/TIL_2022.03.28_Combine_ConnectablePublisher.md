## TIL (Today I Learned)

### 3ì›” 28ì¼ (ì›”)   

- #### [í•™ìŠµë‚´ìš©] 
  ### Combine - ConnectablePublisher    
  
  #### ConnectablePublisher?   
  ê³µì‹ë¬¸ì„œì˜ ì„¤ëª…ì„ ë³´ë©´ ì—°ê²° ê°€ëŠ¥í•œ ê²Œì‹œìë¼ê³  í•´ìš”.   
  ì¦‰ í¼ë¸”ë¦¬ì‹±í•˜ëŠ” ê²Œì‹œë¥¼ ì—°ê²° ë° ì·¨ì†Œí•  ìˆ˜ ìˆëŠ” ìˆ˜ë‹¨ì„ ì œê³µí•©ë‹ˆë‹¤.   
  ```swift
  protocol ConnectablePublisher : Publisher
  ```
  ì´ë ‡ê²Œ ì•ì„œ ë§í–ˆë“¯ Publisherë¥¼ ë”°ë¥´ëŠ” í”„ë¡œí† ì½œì…ë‹ˆë‹¤.   
  ë˜í•œ connect()ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ìš”ì†Œ ìƒì„±ì„ ì•ˆí•©ë‹ˆë‹¤.  
  makeConnectable()ë¥¼ í˜¸ì¶œí•´ì„œ ConnectablePublisherë¥¼ ìƒì„±í•  ìˆ˜ ìˆì–´ìš”.   

  #### ConnectablePublisher ìƒì„± ë° ì‚¬ìš©   
  í•´ë‹¹ íƒ€ì…ìœ¼ë¡œ ë§Œë“  Publisherì—ì„œ ìµœì¢…ì ìœ¼ë¡œ ìš”ì†Œë¥¼ ë°©ì¶œì‹œì¼œì£¼ëŠ” ë°©ë²•ì—ëŠ” ë‘ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.     
  ê³„ì† ì–¸ê¸‰ë˜ì—ˆë˜ connect()ì™€ autoconnect() ì…ë‹ˆë‹¤.   
  ê·¸ëŸ¼ í•˜ë‚˜ì”© ê°„ë‹¨íˆ ì•Œì•„ë³´ë©´ì„œ ì‚¬ìš©í•´ë³´ì£ !   
  
  #### connect()   
  ```swift
  func connect() -> Cancellable
  ```
  ê³µì‹ë¬¸ì„œì˜ ì •ì˜ëŠ” ì´ë ‡ìŠµë‹ˆë‹¤.   
  ê²Œì‹œìì— ì—°ê²°í•´ì„œ ìš”ì†Œ ìƒì„±ì„ í—ˆìš©í•˜ê³  ê²Œì‹œ ì·¨ì†Œí•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•´ì¤ë‹ˆë‹¤.   
  ì•„ê¹Œ ìœ„ì—ì„œ ê³„ì† ì„¤ëª…í–ˆë˜ connect()ì¸ë° ì´ê±¸ í•´ì¤˜ì•¼ í•´ë‹¹ Publisherì—ì„œ ìš”ì†Œë¥¼ ë°©ì¶œí•´ì¤€ë‹¤ê³ í–ˆì£ ?   
  í•œë²ˆ ì½”ë“œë¡œ ë³´ì‹œì£ !   
  ```swift
  // ConnectablePublihser ìƒì„±
  let publisher = [1, 2, 3, 4, 5]
    .publisher
    .makeConnectable()
  
  let cancellable = publisher.sink(receiveValue: {
    print("Num is \($0)")
  }
  
  // ìš”ì†Œ ë°©ì¶œ
  publisher.connect()
  ```
  ì´ë ‡ê²Œ ê°„ë‹¨íˆ ì„ ì–¸ê³¼ ìƒì„±ì„ í†µí•œ í›„ ë°©ì¶œê¹Œì§€ í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ê·¸ëŸ¼ ìˆœì°¨ì ìœ¼ë¡œ 1, 2, 3, 4, 5ì˜ í”„ë¦°íŠ¸ê°€ ì°íˆê² ë„¤ìš”!   
  
  #### autoconnect()    
  ì´ê±´ connect()ì²˜ëŸ¼ ë°©ì¶œí•˜ê³  ì‹¶ì„ë•Œ í˜¸ì¶œí•˜ì§€ ì•Šê³  ConnectablePublisherì„ ìƒì„± ì‹œ í˜¸ì¶œí•´ì¤˜ì„œ ìë™ìœ¼ë¡œ ì—°ê²° ë° ì·¨ì†Œ ë¡œì§ì„ íƒˆ ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ì¹œêµ¬ì…ë‹ˆë‹¤!   
  ```swift
  func autoconnect() -> Publishers.Autoconnect<Self>
  ```
  ì •ì˜ëŠ” ì´ë ‡ìŠµë‹ˆë‹¤.   
  ì—°ê²° ë° í•´ì œë¥¼ ìë™í™”í•´ì¤€ë‹¤ê³  í•´ìš” ì—­ì‹œ!   
  ë˜í•œ ì¤‘ìš”í•œ ì ì€ ê¼­ ì—…ìŠ¤íŠ¸ë¦¼ì—ì„œë§Œ í˜¸ì¶œí•´ì¤˜ì•¼ ìë™ ì—°ê²°ëœë‹¤ê³  í•©ë‹ˆë‹¤.  
  ë°˜í™˜ê°’ì´ ì—…ìŠ¤íŠ¸ë¦„ ì—°ê²° ê°€ëŠ¥í•œ ê²Œì‹œìì— ìë™ìœ¼ë¡œ ì—°ê²°ë˜ëŠ” ê²Œì‹œìë¼ê³  ì„¤ëª…ì´ ë°•í˜€ìˆìŠµë‹ˆë‹¤!   
  ê·¸ëŸ¼ ì½”ë“œë¡œ ì‚¬ìš©ì„ ë³´ì‹œì£ !   
  ```swift
  // autoconnect ì •ìƒ ì‚¬ìš© ì˜ˆì‹œ
  let publisher = [1, 2, 3, 4, 5]
    .publisher
    .makeConnectable()
    .autoconnect()
  
  let cancellable = publisher.sink(receiveValue: {
    print("Num is \($0)")
  }
  
  // autoconnect ë¹„ì •ìƒ ì‚¬ìš© ì˜ˆì‹œ
  let publisher = [1, 2, 3, 4, 5]
    .publisher
    .makeConnectable()
  
  let cancellable = publisher.sink(receiveValue: {
    print("Num is \($0)")
  }
  
  publisher
    .autoconnect()
  ```
  ì´ë ‡ê²Œ ì •ìƒì ìœ¼ë¡œ ì—…ìŠ¤íŠ¸ë¦¼ì—ì„œ í˜¸ì¶œí•´ ì‚¬ìš©í•˜ë©´ ë˜ì§€ë§Œ ì•„ë˜ì™€ ê°™ì´ ì—…ìŠ¤íŠ¸ë¦¼ì´ ì•„ë‹Œ sink ì´í›„ì— í˜¸ì¶œí•œë‹¤ë©´ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.   
  
  #### ë§ˆë¬´ë¦¬   
  ì´ë ‡ê²Œ ê°„ë‹¨íˆ ConnectablePublisher í”„ë¡œí† ì½œì— ëŒ€í•´ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤!   
  ì–´ë– ì‹ ê°€ìš”? ê°ì´ ì˜¤ì‹œë‚˜ìš”..?   
  ì°¸ combine í•˜ë©´ í• ìˆ˜ë¡ ì¬ë¯¸ëŠ” ìˆëŠ”ê²ƒ ê°™ì€ë° ì–´ë µë„¤ìš”!   
  ë‹¤ìŒì—” ë” ì¬ë¯¸ìˆê³  ì–´ë ¤ìš´ê±¸ë¡œ í¬ìŠ¤íŒ…í•´ë³´ê² ìŠµë‹ˆë‹¤ğŸ™Œ   
  
  #### [ì°¸ê³ ìë£Œ]    
  https://green1229.tistory.com/231   
  https://developer.apple.com/documentation/combine/connectablepublisher   