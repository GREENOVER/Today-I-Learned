## TIL (Today I Learned)

### 4ì›” 21ì¼ (ëª©)   

- #### [í•™ìŠµë‚´ìš©]    
  ### Property Wrapper           
  
  #### Property Wrapper????            
  Swift 5.1ì—ì„œ ì²˜ìŒ ì†Œê°œë˜ì–´ ì¶”ê°€ëœ ê¸°ëŠ¥ìœ¼ë¡œ í”„ë¡œí¼í‹°ë¥¼ ê°ì‹¸ íŠ¹ë³„í•œ íƒ€ì…ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì¹œêµ¬ì…ë‹ˆë‹¤.   
  ë’¤ì—ì„œ ì²œì²œíˆ ê°™ì´ í•™ìŠµí•´ë³´ê² ì§€ë§Œ ìš°ì„  ì°ë¨¹í•´ë³´ë©´ í”„ë¡œí¼í‹°ì— ì»¤ìŠ¤í…€í•œ ì–´ë–¤ ë¡œì§ë“¤ì„ ë§¤ë²ˆ ë™ì¼í•˜ê²Œ ì§€ì •í•´ì£¼ì§€ ì•Šê³  Property Wrapperë¡œ ë§Œë“  íƒ€ì…ìœ¼ë¡œ í”„ë¡œí¼í‹°ë¥¼ ì„ ì–¸í•´ ë™ì¼ ë¡œì§ì„ ìˆ˜í–‰í•˜ë„ë¡ í•©ë‹ˆë‹¤!   
  Property WrapperëŠ” íŠ¹íˆ ì§€ì—­ë³€ìˆ˜ì—ì„œë§Œ ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤ğŸ™Œ   
  ì•„ë§ˆ ë‹¤ë“¤ ë§ì´ ë³´ì…¨ì„ê²ƒ ê°™ì€ @UserDefaults, @State, @Binding ë“±ë“± ë˜ê²Œ ë§ì€ ì´ëŸ¬í•œ í˜•íƒœë¥¼ ëˆ ì¹œêµ¬ë“¤ì´ Property Wrapperë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ì €ëŠ” íŠ¹íˆ ìŠ¤ìœ ì—ì„œ ë§ì´ ë³´ê³  ìˆë„¤ìš”ğŸ˜€   

  #### Property Wrapperê°€ ì—†ë‹¤ë©´?   
  ìš°ì„  Propery Wrapperì˜ ì¥ì ì„ ì•Œë ¤ë©´ ì´ê²Œ ì—†ì—ˆì„ë•Œì˜ ë‹¨ì ë„ ì•Œì•„ì•¼ê² ì£ ?   
  ì„ ì½”ë“œ í›„ì´í•´ ã„±ã„±   
  ```swift
  struct House {
    private var width = 0
    var size: Int {
      get { return width }
      set { width = pow(newValue, 2) }
    }
  }
  
  struct KoreaHouse {
    private var _apartment = House()
    private var _villa = House()
  
    var apartmentSize: Int {
      get { return _apartment.size }
      set { _apartment.size = newValue }
    }
    var villaSize: Int {
      get { return _villa.size }
      set { _villa.size = newValue }
    }
  }
  ```
  ì ë§Œì•½ ì§‘ì˜ ì‚¬ì´ì¦ˆë¥¼ ê°€ì§€ëŠ” House íƒ€ì…ì´ ìˆë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤.   
  ì´ë ‡ê²Œ ì •ì˜í•´ì¤€ íƒ€ì…ì„ KoreaHouse êµ¬ì¡°ì²´ ë‚´ì—ì„œ ê° í”„ë¡œí¼í‹°ì—ì„œ ë§¤ë²ˆ ë™ì¼í•œ ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ë˜ìš”.   
  ì´ê²Œ ì§€ê¸ˆì€ ê´œì°®ì§€ë§Œ í”„ë¡œí¼í‹°ê°€ ë§ì•„ì§€ê³  ë‹¤ë¥¸ íƒ€ì…ì—ì„œë„ ì“°ì´ê³  í•œë‹¤ë©´ ë˜ê²Œ ë¶ˆí•„ìš”í•œ ì‘ì—…ì´ ë ê±°ì—ìš”!   
  ì¦‰, ì´ëŸ° ì¤‘ë³µ ë¡œì§ë“¤ì„ Propery Wrapperë¥¼ ë¶™ì—¬ í•œë²ˆë§Œ ì •ì˜í•´ì£¼ë©´ ì´í›„ ë‹¤ë¥¸ í”„ë¡œí¼í‹°ë“¤ì—ì„œ í•´ë‹¹ Property Wrapperë¥¼ ì ìš©í•˜ë©´ ê¹”ë”í•˜ê²Œ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ğŸ‘   

  #### Propery Wrapper ì •ì˜   
  Propery WrapperëŠ” í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ëŠ” íƒ€ì… ì•ì— ë¶™ì—¬ì¤ë‹ˆë‹¤.   
  í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ëŠ” íƒ€ì…ì´ë¼í•¨ì€ Class, Struct, Enumì´ ìˆê² ì£ ?   
  ```swift
  @propertyWrapper
  struct House {
    private var width = 0
    var size: Int {
      get { return width }
      set { width = pow(newValue, 2) }
    }
  }
  ì´ë ‡ê²Œ ë¶™ì—¬ì¤ë‹ˆë‹¤. ì•„ì£¼ ê°„ë‹¨í•˜ì£ !
  ì•„ ë¬¼ë¡  íƒ€ì…ì´ë‹ˆ ì´ˆê¸°ê°’ì„ ì¤„ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤!
  @propertyWrapper
  struct House {
    private var width = 0
    var size: Int {
      get { return width }
      set { width = pow(newValue, 2) }
    }
  
    init(size: Int) {
      widht = pow(newValue, 2)
    }
  }
  ```

  ê·¸ëŸ¼ ì´ì œ ì´ëŸ° ì¥ì ì„ ì§€ë‹Œ Property Wrapperê°€ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì“°ì´ëŠ”ì§€ ë´ë³´ì‹œì£ !   

  #### Property Wrapper ì‚¬ìš©í•˜ê¸°   
  ```swift
  struct KoreaHouse {
    @House var apartment: Int
    @House var villa: Int
  }
  
  var koreaHouse = KoreaHouse()
  koreaHouse.apartment = 20
  koreaHouse.villa = 30
  
  print(koreaHouse.apartment, koreaHouse.villa)
  // 400, 900
  ```
  ì KoreaHouse íƒ€ì…ì„ ë§Œë“œëŠ”ë° ì•„ì£¼ì•„ì£¼ ê°„ë‹¨í•´ì¡ŒìŠµë‹ˆë‹¤ğŸ˜€   
  ë§Œì•½ ìœ„ì— propertyWrapper êµ¬í˜„ ì‹œ ì´ë‹ˆì…œë¼ì´ì €ë¥¼ ì§€ì •í•´ì¤¬ë‹¤ë©´ KoreaHouseì—ì„œë„ ì´ˆê¸°ê°’ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤!   
  ```swift
  struct KoreaHouse {
    @House var apartment: Int = 20
    @House var villa: Int = 30
  }
  
  var koreaHouse = KoreaHouse()
  print(koreaHouse.apartment, koreaHouse.villa)
  // 400, 900
  ```
  ë” ëª…ë£Œí•˜ê²Œ ì‚¬ìš©í• ìˆ˜ë„ ìˆê³  í¸ë¦¬í•œ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤!   
  í•µì‹¬ì€ ë³´ì¼ëŸ¬ ì½”ë“œê°€ ì œê±° ë˜ì—ˆê³  ì‚¬ìš©ì„±ì´ ì¦ëŒ€í–ˆë‹¤ëŠ”ì ì´ ìˆìŠµë‹ˆë‹¤ğŸ™Œ   

  #### @Stateë„ Property Wrapperì˜€ì–´ğŸ˜„   
  SwiftUIì—ì„œ State íƒ€ì…ì„ ê¹Œë³´ë©´ ì•„ë˜ì™€ ê°™ì´ @propertyWrapper ë”±ì§€ê°€ ë¶™ì–´ìˆëŠ”ê±¸ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
  ì¦‰ ì´ ì¹œêµ¬ë„ ì¤‘ë³µ ë¡œì§ ì½”ë“œë¥¼ propertyWrapperë¡œ ì •ë¦¬í–ˆë‹¤ ë³¼ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤!   
  ```swift
  @frozen @propertyWrapper public struct State<Value> : DynamicProperty {
    public init(wrappedValue value: Value)
  
    public init(initialValue value: Value)
  
    public var wrappedValue: Value { get nonmutating set }
  
    public var projectedValue: Binding<Value> { get }
  }
  ```
  ìš”ë ‡ê²Œ ì£¼ì„ ì œê±°í•˜ë©´ êµ¬í˜„ì´ ë˜ì–´ ìˆì–´ìš”.   
  ìƒˆë¡œ ì ‘í•œê±´ projectedValueì¸ë° ì´ê±´ ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œ~   

  #### ë§ˆë¬´ë¦¬   
  ì™€.. Property Wrapper ëŒ€ì¶©ë§Œ ì•Œê³  ìˆì—ˆê³  êµ¬í˜„ê¹Œì§€ëŠ” ì˜ ëª°ëì—ˆë‚˜ë´…ë‹ˆë‹¤ã…    
  ì´ë˜ì„œ ëŒ€ì¶© ì•„ëŠ”ê²Œ ë” ë¬´ì„­ë‹¤ë‹ˆê¹Œìš”ğŸ¤¯   
  ê·¸ë˜ë„ ì˜¤ëŠ˜ Swift ì§€ì‹ +1ì´ ëœê²ƒ ê°™ì•„ ë¿Œë“¯í•œ í•˜ë£¨ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤âœ¨   

  #### [ì°¸ê³ ìë£Œ]   
  https://green1229.tistory.com/238   
  https://docs.swift.org/swift-book/LanguageGuide/Properties.html#ID617   
  https://github.com/apple/swift-evolution/blob/master/proposals/0258-property-wrappers.md   
